# Smart Augmented Reality Automated Home

SARAH is my approach for a smart home system. At the moment, this project is still very much a work in progress.

Why another smart home system? For several reasons:
* I don't want to have to buy new hardware that is "smart home ready", I want to use the hardware I already have and integrate it with my system
* I want to build my smart home myself and learn from it
* I want a smart home written in [Haskell](https://www.haskell.org/)

## Status
At the moment, things are still pretty basic and simple. I'm building the general infrastructure for interaction with different devices, sending commands, reading sensors, etc., so basically all the housekeeping. But the plan for the future is to provide different ways of interaction, integration of "more complicated devices", and automation through schedules and such.

## Components
SARAH consists of different components, each of which is responsible for specific tasks, providing different services.

### Frontend
The frontend is written in using [threepenny-gui](https://hackage.haskell.org/package/threepenny-gui) and can be used to control the smart home system through a web interface. The frontend interacts with the middleware through a REST interface that is provided by the middleware.

### Middleware
The middleware is written using [Servant](http://haskell-servant.readthedocs.io/) for providing a REST interface and [Cloud Haskell](http://haskell-distributed.github.io/) for distribution. The middleware interacts with the persist backend through a REST interface that is provided by the backend.

There is one master node in the middleware that is responsible for talking to the persist backend and for taking input from the frontend through the provided REST interface. On every device that is part of the smart home system, there is one slave node running that connects to and communicated with the master node.

### Persist Backend
The persist backend is written using [Servant](http://haskell-servant.readthedocs.io/) for providing a REST interface and [Persistent](http://www.yesodweb.com/book/persistent) for interaction with a database backend. At the moment, a MySQL database is used, but it could be really anything that Persistent can talk to.

### Hardware
I use multiple Raspberry Pi 3 and some prototyping hardware such as sensors and IR-LEDs to interact with, e.g., TV and AC.

### Dependencies
* [libpigpio](https://github.com/joan2937/pigpio): We need a patched version of pigpio that simply disregards SIGVTALRM, as this signal is generated by Haskell's RTS. pigpio's default behaviour on SIGVTALRM would be to give up and exit.
* [ir-slinger](https://github.com/bschwind/ir-slinger): For sending controls through IR-LEDs
